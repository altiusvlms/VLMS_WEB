<div class="container">
  <h2>Create Employee</h2>
  <div class="card">
    <div class="card-body">
  <mat-tab-group>
    <form [formGroup]="manageEmployeeForm">
      <!-- /** Tab1 */ -->
    <mat-tab label="Employee Details">
      <div class="container">
        <div class="row">
          <div class="col-4 col-sm-4">
            <mat-form-field appearance="outline" class="example-full-width">
              <mat-label>Name</mat-label>
              <input matInput type='text' formControlName="name" [ngClass]="{ 'is-invalid': submitted && f.name.errors }">
          </mat-form-field>
          <div *ngIf="submitted && f.name.errors"  class="alert alert-danger">
            <div *ngIf="f.name.errors.required">Name is Required!</div>
        </div>
          </div>
          <div class="col-4 col-sm-4">
            <mat-form-field appearance="outline" class="example-full-width">
              <mat-label>CalledName</mat-label>
              <input matInput type='text' formControlName="calledName" [ngClass]="{ 'is-invalid': submitted && f.calledName.errors }">
          </mat-form-field>
          <div *ngIf="submitted && f.calledName.errors"  class="alert alert-danger">
            <div *ngIf="f.calledName.errors.required">Name is Required!</div>
        </div>
          </div>
          <div class="col-4 col-sm-4">
            <mat-form-field appearance="outline" class="example-full-width">
              <mat-label>SurName</mat-label>
              <input matInput type='text' formControlName="surName" [ngClass]="{ 'is-invalid': submitted && f.surName.errors }">
          </mat-form-field>
          <div *ngIf="submitted && f.surName.errors"  class="alert alert-danger">
            <div *ngIf="f.surName.errors.required">Name is Required!</div>
        </div>
          </div>

          <div class="col-4 col-sm-4">
            <mat-form-field appearance="outline" class="example-full-width">
              <mat-label>Mobile Number</mat-label>
              <input matInput formControlName="mobileNumber" minlength="10" maxlength="10" pattern="[0-9]*" [ngClass]="{ 'is-invalid': submitted && f.mobileNumber.errors }">
          </mat-form-field>
          <div *ngIf="submitted && f.mobileNumber.errors"  class="alert alert-danger">
            <div *ngIf="f.mobileNumber.errors.required">Mobile No is Required!</div>
            <div *ngIf="manageEmployeeForm.get('mobileNumber').hasError('pattern')">Please Enter 10 digit Mobile Number!</div>
        </div>
          </div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Alternative Number</mat-label>
            <input matInput formControlName="altNumber" minlength="10" maxlength="10" pattern="[0-9]*" [ngClass]="{ 'is-invalid': submitted && f.altNumber.errors }">
        </mat-form-field>
        <div *ngIf="submitted && f.altNumber.errors"  class="alert alert-danger">
            <div *ngIf="f.altNumber.errors.required">Mobile No is Required!</div>
            <div *ngIf="manageEmployeeForm.get('altNumber').hasError('pattern')">Please Enter 10 digit Mobile Number!</div>
        </div>
        </div>
        <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class=" example-full-width">
          <mat-label>Official Number</mat-label>
          <input matInput formControlName="officialNumber" minlength="10" maxlength="10" pattern="[0-9]*" [ngClass]="{ 'is-invalid': submitted && f.altNumber.errors }">
      </mat-form-field>
      <div *ngIf="submitted && f.officialNumber.errors"  class="alert alert-danger">
        <div *ngIf="f.officialNumber.errors.required">Mobile No is Required!</div>
        <div *ngIf="manageEmployeeForm.get('officialNumber').hasError('pattern')">Please Enter 10 digit Mobile Number!</div>
    </div>
    </div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <input matInput [matDatepicker]="dp" placeholder="Date of Birth" formControlName="dob" [ngClass]="{ 'is-invalid': submitted && f.dob.errors }">
            <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
            <mat-datepicker #dp></mat-datepicker>
        </mat-form-field>
        <div *ngIf="submitted && f.dob.errors"  class="alert alert-danger">
          <div *ngIf="f.dob.errors.required">Please enter DOB!</div>
      </div>
      </div>

          <div class="col-4 col-sm-4"><button mat-button (click)="CalculateAge()">Calculate Age</button>
            <mat-form-field appearance="outline" class="example-full-width">
              <input matInput placeholder="Age" value="{{age}}" formControlName="age" [ngClass]="{ 'is-invalid': submitted && f.age.errors }">
          </mat-form-field>
          <div *ngIf="submitted && f.age.errors"  class="alert alert-danger">
            <div *ngIf="f.age.errors.required">Age is Required!</div>
        </div>
          </div>

          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Gender</mat-label>
            <mat-select  formControlName="gender" [ngClass]="{ 'is-invalid': submitted && f.gender.errors }">
                <mat-option value="male">Male</mat-option>
                <mat-option value="female">Female</mat-option>
            </mat-select>
        </mat-form-field>
        <div *ngIf="submitted && f.gender.errors"  class="alert alert-danger">
          <div *ngIf="f.gender.errors.required">Gender is Required!</div>
      </div>
      </div>

          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Marital Status</mat-label>
            <mat-select formControlName="maritalStatus"  (selectionChange)="onMaritalStatusChange($event.value)" >
                <mat-option value="single">Single</mat-option>
                <mat-option value="married">Married</mat-option>
            </mat-select>
        </mat-form-field>
        <!-- <div *ngIf="manageEmployeeForm.controls['maritalStatus'].invalid && (manageEmployeeForm.controls['maritalStatus'].dirty || manageEmployeeForm.controls['maritalStatus'].touched)" class="alert alert-danger">
            <div *ngIf="manageEmployeeForm.controls['maritalStatus'].errors.required">
                Please select a value!
            </div>
        </div> -->
      </div>
        <div class="col-4 col-sm-4" *ngIf="showSpouse">
          <mat-form-field appearance="outline" class="example-full-width">
              <mat-label>Spouse Name</mat-label>
              <input matInput formControlName="spousename">
          </mat-form-field>
          <!-- <div *ngIf="manageEmployeeForm.controls['spousename'].invalid && (manageEmployeeForm.controls['spousename'].dirty || manageEmployeeForm.controls['spousename'].touched)" class="alert alert-danger">
              <div *ngIf="manageEmployeeForm.controls['spousename'].errors.required">
                  Please enter Spouse Name!
              </div>
          </div> -->
     </div>

          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Designation</mat-label>
            <input matInput formControlName="designation" [ngClass]="{ 'is-invalid': submitted && f.designation.errors }">
        </mat-form-field>
        <div *ngIf="submitted && f.designation.errors"  class="alert alert-danger">
          <div *ngIf="f.designation.errors.required">Designation is Required!</div>
      </div>
      </div>

          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Blood Group</mat-label>
            <input matInput formControlName="bloodGroup">
        </mat-form-field>
        <!-- <div *ngIf="manageEmployeeForm.controls['bloodGroup'].invalid && (manageEmployeeForm.controls['bloodGroup'].dirty || manageEmployeeForm.controls['bloodGroup'].touched)" class="alert alert-danger">
            <div *ngIf="manageEmployeeForm.controls['bloodGroup'].errors.required">
                Please enter Blood Group!
            </div>
        </div> -->
      </div>

          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Father's Name</mat-label>
            <input matInput formControlName="fatherName" [ngClass]="{ 'is-invalid': submitted && f.fatherName.errors }">
        </mat-form-field>
        <div *ngIf="submitted && f.fatherName.errors"  class="alert alert-danger">
          <div *ngIf="f.fatherName.errors.required">Father's Name is Required!</div>
      </div>
      </div>

          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Vehicle Number</mat-label>
            <input matInput formControlName="vehicleNumber" #input [value]="input.value.toUpperCase()" [ngClass]="{ 'is-invalid': submitted && f.vehicleNumber.errors }">
        </mat-form-field>
        <div *ngIf="submitted && f.vehicleNumber.errors"  class="alert alert-danger">
          <div *ngIf="f.vehicleNumber.errors.required">Vehicle Number is Required!</div>
      </div>
      </div>

          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Date of Joining</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="doj" [ngClass]="{ 'is-invalid': submitted && f.doj.errors }">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <div *ngIf="submitted && f.doj.errors"  class="alert alert-danger">
          <div *ngIf="f.doj.errors.required">Please enter DOJ!</div>
      </div>
      </div>

        <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
          <mat-label>AGT Number</mat-label>
          <input matInput formControlName="agtnumber"  [ngClass]="{ 'is-invalid': submitted && f.agtnumber.errors }">
      </mat-form-field>
      <div *ngIf="submitted && f.agtnumber.errors"  class="alert alert-danger">
        <div *ngIf="f.agtnumber.errors.required">AGT Number is Required!</div>
    </div>
    </div>
        </div>
      </div>  
    </mat-tab>

 <!-- /** Tab2 */ -->
    <!-- /** Add Communication address  */ -->
    <mat-tab label="Add Address">

      <h2>Add Communication Address</h2>

      <div class="container">
        <div class="row" formGroupName="employee_communicationAddress">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Address Line 1</mat-label>
            <input matInput formControlName="addressLine1">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Address Line 2</mat-label>
            <input matInput formControlName="addressLine2">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Landmark</mat-label>
            <input matInput formControlName="landmark">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Enter Pincode</mat-label>
            <input matInput formControlName="pincode" minlength=6 maxlength=6>
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Area</mat-label>
            <mat-select formControlName="area">
                <mat-option value="saibabaColony">Saibaba Colony</mat-option>
                <mat-option value="gandhipuram">Gandhipuram</mat-option>
            </mat-select>
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>City</mat-label>
            <mat-select formControlName="city">
                <mat-option value="coimbatore">Coimbatore</mat-option>
                <mat-option value="chennai">Chennai</mat-option>
                <mat-option value="bangalore">Bangalore</mat-option>
            </mat-select>
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>State</mat-label>
            <mat-select formControlName="state">
                <mat-option value="tamilnadu">Tamilnadu</mat-option>
                <mat-option value="Kerala">Kerala</mat-option>
                <mat-option value="karnataka">karnataka</mat-option>
            </mat-select>
        </mat-form-field></div>
        </div>
      </div>    

      <h2>Add permanent address</h2>

      <div class="container">
        <div class="row" formGroupName="employee_permanentAddress">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Address Line 1</mat-label>
            <input matInput formControlName="addressLine1">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Address Line 2</mat-label>
            <input matInput formControlName="addressLine2">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Landmark</mat-label>
            <input matInput formControlName="landmark">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Enter Pincode</mat-label>
            <input matInput formControlName="pincode" minlength=6 maxlength=6>
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Area</mat-label>
            <mat-select formControlName="area">
                <mat-option value="saibabaColony">Saibaba Colony</mat-option>
                <mat-option value="gandhipuram">Gandhipuram</mat-option>
            </mat-select>
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>City</mat-label>
            <mat-select formControlName="city">
                <mat-option value="coimbatore">Coimbatore</mat-option>
                <mat-option value="chennai">Chennai</mat-option>
                <mat-option value="bangalore">Bangalore</mat-option>
            </mat-select>
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>State</mat-label>
            <mat-select formControlName="state">
                <mat-option value="tamilnadu">Tamilnadu</mat-option>
                <mat-option value="Kerala">Kerala</mat-option>
                <mat-option value="Karnataka">Karnataka</mat-option>
            </mat-select>
        </mat-form-field></div>
        </div>

        
      </div>    
  
    
    </mat-tab>

<!-- /** Tab3 */ -->
    <!-- /** Add Bank Detail  */ -->
    <mat-tab label="Bank Details"> 
      <div class="container">
        <div class="row" >
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Acc Number</mat-label>
            <input matInput formControlName="accountNumber">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Name</mat-label>
            <input matInput formControlName="accountHolderName">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>IFSC</mat-label>
            <input #IFSC matInput formControlName="IFSC" (input)="IFSC.value = IFSC.value.toUpperCase()">
        </mat-form-field>
      </div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Bank</mat-label>
            <mat-select formControlName="bankName">
                <mat-option value="sbi">SBI</mat-option>
                <mat-option value="ICICI">ICICI</mat-option>
                <mat-option value="iob">IOB</mat-option>
            </mat-select>


        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Branch</mat-label>
            <mat-select formControlName="branchName">
                <mat-option value="chennai">Chennai</mat-option>
                <mat-option value="cbe">CBE</mat-option>
                <mat-option value="karur">Karur</mat-option>
            </mat-select>
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Acc type</mat-label>
            <mat-select formControlName="accountType">
                <mat-option value="savings-account">Savings</mat-option>
                <mat-option value="salary">Salary</mat-option>
                <mat-option value="current">Current</mat-option>
            </mat-select>
        </mat-form-field></div>
        </div>
      </div>    
    </mat-tab>

<!-- /** Tab4 */ -->
    <!-- /** Insurance Details  */ -->
    <mat-tab label="Insurance Details">
      <div class="container">
        <div class="row" formGroupName="general_insurance">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Policy No</mat-label>
            <input matInput formControlName="policyNumber">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Company Coverage</mat-label>
            <input matInput formControlName="companyCoverage">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Policy Coverage</mat-label>
            <input matInput formControlName="policyCoverage">
        </mat-form-field></div>
        </div>
      </div>    
    </mat-tab>

<!-- /** Tab5 */ -->
    <!-- /** Accident Insurance Details  */ -->    
    <mat-tab label="Accident Insurance Details"> 
      <div class="container">
        <div class="row" formGroupName="accidental_insurance">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Policy No</mat-label>
            <input matInput formControlName="policyNumber">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Company Coverage</mat-label>
            <input matInput formControlName="companyCoverage">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Policy Coverage</mat-label>
            <input matInput formControlName="policyCoverage">
        </mat-form-field></div>
          <!-- <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>AGT Number</mat-label>
            <input matInputformControlName="agtnumber">
        </mat-form-field></div> -->
          <div class="col-4 col-sm-4"></div>
          <div class="col-4 col-sm-4"></div>
        </div>
      </div>    

    </mat-tab>

<!-- /** Tab6 */ -->
    <!-- /** Loan Details */ -->    
    <mat-tab label="Loan Details"> 
      <h2>ID Proofs</h2>
      <form [formGroup]="documentImageForm">
        <div class="container"  formArrayName="image">
          <button class="btn_blue" (click)="addImage()">Add</button>
          <div class="row" *ngFor="let image of image().controls; let i=index" [formGroupName]="i">
            
            <div class="col-4 col-sm-4" ><label>ID Proof:
              <select  class="form-control" formControlName="documentName">
                <option >Choose Options</option>
                <option *ngFor="let document of documentDetails">{{document.documentName}}</option>
              </select>

              <div class="col-4 col-sm-12">
                <mat-form-field appearance="outline" class="example-full-width">
                  <mat-label>Document Number</mat-label>
                  <input matInput type='text' formControlName="documentNo">
              </mat-form-field>
              </div>
              <input #file type="file" accept='image/*'  (change)="uploadImages($event,i)"  />
        <div *ngIf="[i]== 0">
            <img [src] ="imageURL0 ? imageURL0 : 'assets/images/empty_image.png'" style="width: 30%;object-fit: contain;
            object-position: center;">
         </div>
        <div *ngIf="[i]== 1">
            <img [src] ="imageURL1 ? imageURL1 : 'assets/images/empty_image.png'" style="width: 30%;object-fit: contain;
            object-position: center;">
          </div>
        <div *ngIf="[i]== 2">
            <img [src] ="imageURL2 ? imageURL2 : 'assets/images/empty_image.png'" style="width: 30%;object-fit: contain;
            object-position: center;">
          </div>

          </label></div>


          <div class="col-4 col-sm-4">
            <button (click)="removeImage(i)" class="btn btn-danger">Remove</button>
          </div>

          </div>
        </div>    
      </form>
    </mat-tab>
    
<!-- /** Tab7 */ -->
    <!-- /** Education Qualification */ --> 
    <mat-tab label="Education Qualification">
      <h2>School Qualification</h2>
      <div class="container">
        <div class="row"  formGroupName="school_qualification">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>School Name</mat-label>
            <input matInput formControlName="university">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Qualification</mat-label>
            <input matInput formControlName="qualification">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>%Obtained</mat-label>
            <input matInput formControlName="percentage">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Passing year</mat-label>
            <input matInput formControlName="passingyear">
        </mat-form-field>
        </div>
        </div>
      </div>    
      <h2>College Qualification</h2>
      <div class="container">
        <div class="row"  formGroupName="college_qualification">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>College Name</mat-label>
            <input matInput formControlName="university">
        </mat-form-field></div>          
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Qualification</mat-label>
            <input matInput formControlName="qualification">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>%Obtained</mat-label>
            <input matInput formControlName="percentage">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Passing year</mat-label>
            <input matInput formControlName="passingyear">
        </mat-form-field></div>

        </div>
      </div>    

      <h2>Graduate Qualification</h2>
      <div class="container">
        <div class="row"  formGroupName="graduate_qualification">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Graduate Qualification</mat-label>
            <input matInput formControlName="university">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Qualification</mat-label>
            <input matInput formControlName="qualification">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>%Obtained</mat-label>
            <input matInput formControlName="percentage">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Passing year</mat-label>
            <input matInput formControlName="passingyear">
        </mat-form-field></div>

        </div>
      </div>    

      <h2>Post Graduate Qualification</h2>
      <div class="container">
        <div class="row" formGroupName="postgraduate_qualification">
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Postgraduate Qualification</mat-label>
            <input matInput formControlName="university">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Qualification</mat-label>
            <input matInput formControlName="qualification">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>%Obtained</mat-label>
            <input matInput formControlName="percentage">
        </mat-form-field></div>
          <div class="col-4 col-sm-4"><mat-form-field appearance="outline" class="example-full-width">
            <mat-label>Passing year</mat-label>
            <input matInput formControlName="passingyear">
        </mat-form-field></div>

        </div>
      </div>    
      <button type="submit" class="btn_blue"   (click)="createEmployee()">Submit</button>

    </mat-tab>

  
  </form>
  </mat-tab-group>
  </div>
  </div>

</div>